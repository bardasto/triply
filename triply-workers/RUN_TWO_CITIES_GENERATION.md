# ะะฐะฟััะบ ะณะตะฝะตัะฐัะธะธ ะดะปั ะดะฒัั ะณะพัะพะดะพะฒ ั 5 ะฐะบัะธะฒะฝะพัััะผะธ

## ะงัะพ ะฑัะดะตั ัะณะตะฝะตัะธัะพะฒะฐะฝะพ

### Barcelona (5 ะฐะบัะธะฒะฝะพััะตะน):
1. **city** - ะะพัะพะดัะบะพะน ัััะธะทะผ (ะผัะทะตะธ, ะฐััะธัะตะบัััะฐ, ะดะพััะพะฟัะธะผะตัะฐัะตะปัะฝะพััะธ)
2. **beach** - ะะปัะถะฝัะน ะพัะดัั (ะฟะปัะถะธ, ะฒะพะดะฝัะต ะฒะธะดั ัะฟะพััะฐ)
3. **food** - ะะฐัััะพะฝะพะผะธัะตัะบะธะต ัััั (ัะตััะพัะฐะฝั, ััะฝะบะธ, ัะฐะฟะฐั)
4. **cultural** - ะัะปััััะฝัะต ัััั (ะธัะบััััะฒะพ, ะธััะพัะธั, ะะฐัะดะธ)
5. **cycling** - ะะตะปะพัะธะฟะตะดะฝัะต ัััั (ะฝะฐะฑะตัะตะถะฝะฐั, ะฟะฐัะบะธ, ะฒะตะปะพะผะฐัััััั)

### Paris (5 ะฐะบัะธะฒะฝะพััะตะน):
1. **city** - ะะพัะพะดัะบะพะน ัััะธะทะผ (ะญะนัะตะปะตะฒะฐ ะฑะฐัะฝั, ะัะฒั, ะะพัั-ะะฐะผ)
2. **cultural** - ะัะปััััะฝัะต ัััั (ะผัะทะตะธ, ะณะฐะปะตัะตะธ, ะธััะพัะธั)
3. **food** - ะะฐัััะพะฝะพะผะธัะตัะบะธะต ัััั (ััะฐะฝััะทัะบะฐั ะบััะฝั, ะบะฐัะต, ััะฝะบะธ)
4. **shopping** - ะจะพะฟะฟะธะฝะณ-ัััั (ะะปะธัะตะนัะบะธะต ะฟะพะปั, ะฑััะธะบะธ, ััะฝะบะธ)
5. **nightlife** - ะะพัะฝะฐั ะถะธะทะฝั (ะฑะฐัั, ะบะปัะฑั, ะบะฐะฑะฐัะต)

**ะัะพะณะพ: 10 ะผะฐัััััะพะฒ (2 ะณะพัะพะดะฐ ร 5 ะฐะบัะธะฒะฝะพััะตะน)**

## ะะพะผะฐะฝะดะฐ ะดะปั ะทะฐะฟััะบะฐ

```bash
npx tsx src/modules/trips/jobs/generate-trips.ts
```

## ะะฐัะฐะผะตััั ะณะตะฝะตัะฐัะธะธ

ะ ัะฐะนะปะต `generate-trips.ts` ะฝะฐัััะพะตะฝั ัะปะตะดัััะธะต ะฟะฐัะฐะผะตััั:

```typescript
{
  testMode: false,           // ะะต ัะตััะพะฒัะน ัะตะถะธะผ (ะธัะฟะพะปัะทัะตะผ maxCities)
  maxCities: 2,              // ะขะพะปัะบะพ Barcelona ะธ Paris
  activitiesPerCity: 5,      // 5 ัะฐะทะฝัั ะฐะบัะธะฒะฝะพััะตะน ะฝะฐ ะณะพัะพะด
  dryRun: false,             // ะะะะะฌะะะฏ ะณะตะฝะตัะฐัะธั (ัะพััะฐะฝะตะฝะธะต ะฒ ะะ)
  delayBetweenTrips: 3000,   // 3 ัะตะบัะฝะดั ะผะตะถะดั ะผะฐัััััะฐะผะธ
}
```

## ะะถะธะดะฐะตะผะพะต ะฒัะตะผั ะฒัะฟะพะปะฝะตะฝะธั

- **10 ะผะฐัััััะพะฒ** ร 3 ัะตะบัะฝะดั = ~30 ัะตะบัะฝะด (ะผะธะฝะธะผัะผ)
- ะก ััะตัะพะผ ะณะตะฝะตัะฐัะธะธ OpenAI: **~5-10 ะผะธะฝัั**
- ะะฐะถะดัะน ะผะฐััััั ะฒะบะปััะฐะตั:
  - ะัะทะพะฒ OpenAI API ะดะปั ะณะตะฝะตัะฐัะธะธ
  - ะะฑะพะณะฐัะตะฝะธะต ะดะฐะฝะฝัะผะธ ะธะท Google Places
  - ะะพะปััะตะฝะธะต 3-5 ัะพัะพ ะดะปั ะบะฐะถะดะพะณะพ ะผะตััะฐ
  - ะกะพััะฐะฝะตะฝะธะต ะฒ ะฑะฐะทั ะดะฐะฝะฝัั

## ะัะพะฒะตัะบะฐ ะฟะตัะตะด ะทะฐะฟััะบะพะผ

ะฃะฑะตะดะธัะตัั ััะพ:
1. โ ะะฐะทะฐ ะดะฐะฝะฝัั ัะพะดะตัะถะธั POIs ะดะปั Barcelona ะธ Paris (ะผะธะฝะธะผัะผ 10 ะฝะฐ ะณะพัะพะด)
2. โ ะััั ัะตััะพัะฐะฝั ะฒ ะะ ะดะปั ััะธั ะณะพัะพะดะพะฒ
3. โ ะะฐัััะพะตะฝั API ะบะปััะธ:
   - OPENAI_API_KEY
   - GOOGLE_MAPS_API_KEY
   - UNSPLASH_ACCESS_KEY
4. โ Supabase ะฟะพะดะบะปััะตะฝะธะต ัะฐะฑะพัะฐะตั

## ะะพะฝะธัะพัะธะฝะณ ะฒัะฟะพะปะฝะตะฝะธั

ะะพ ะฒัะตะผั ะณะตะฝะตัะฐัะธะธ ะฒั ัะฒะธะดะธัะต:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ช๐บ TRIP GENERATION WITH ACTIVITY-SPECIFIC PROMPTS
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
Mode: ๐ฏ TWO CITIES TEST
Target cities: 2
Activities per city: 5
Features: Activity-specific prompts, detailed places, restaurants, 3-5 photos per place
Dry run: NO (will save to DB)
Expected trips: 10
Estimated time: 0.5 minutes
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ Fetching European cities from database...
  โ Barcelona, Spain: 45 POIs
  โ Paris, France: 78 POIs

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐๏ธ  City 1/2: Barcelona, Spain
   Activities: city, beach, food, cultural, cycling
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  ๐ฏ Generating city trip...
  [1/7] Fetching POIs...
  [2/7] Calling OpenAI for DETAILED itinerary...
  ...
  โ Saved: Barcelona City Discovery - 3 Days

  ๐ฏ Generating beach trip...
  ...
```

## ะะพัะปะต ะณะตะฝะตัะฐัะธะธ

ะัะพะฒะตัััะต ัะตะทัะปััะฐัั ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั:

```sql
-- ะะพัะผะพััะตัั ัะณะตะฝะตัะธัะพะฒะฐะฝะฝัะต ะผะฐัััััั
SELECT
  title,
  city,
  activity_type,
  duration,
  created_at
FROM public_trips
WHERE city IN ('Barcelona', 'Paris')
ORDER BY city, activity_type;
```

ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั - 10 ะทะฐะฟะธัะตะน:
- 5 ะดะปั Barcelona (city, beach, food, cultural, cycling)
- 5 ะดะปั Paris (city, cultural, food, shopping, nightlife)

## Troubleshooting

### ะัะปะธ ะณะตะฝะตัะฐัะธั ะฝะต ะทะฐะฟััะบะฐะตััั:
```bash
# ะัะพะฒะตัะธัั ััััะบัััั ะฟะฐะฟะพะบ
ls -la src/modules/ai/prompts/

# ะะพะปะถะฝะพ ะฑััั 17 ัะฐะนะปะพะฒ (base-prompt, index, 15 ะฐะบัะธะฒะฝะพััะตะน)
```

### ะัะปะธ OpenAI ะฒะพะทะฒัะฐัะฐะตั ะพัะธะฑะบะธ:
- ะัะพะฒะตัััะต API ะบะปัั
- ะัะพะฒะตัััะต ะปะธะผะธัั ะฐะบะบะฐัะฝัะฐ OpenAI
- ะฃะฒะตะปะธัััะต `delayBetweenTrips` ะดะพ 5000-10000

### ะัะปะธ ะฝะต ัะฒะฐัะฐะตั POIs:
```bash
# ะะผะฟะพััะธัะพะฒะฐัั POIs ะดะปั ะณะพัะพะดะพะฒ
npx tsx src/modules/pois/jobs/import-pois-for-cities.ts
```

## DRY RUN ัะตะถะธะผ

ะัะปะธ ัะพัะธัะต ัะพะปัะบะพ ะฟัะพะฒะตัะธัั ะฟัะพะผะฟัั ะฑะตะท ะณะตะฝะตัะฐัะธะธ:

```typescript
{
  dryRun: true,  // ะะทะผะตะฝะธัะต ะฝะฐ true
  ...
}
```

ะะปะธ ะธัะฟะพะปัะทัะนัะต ัะตััะพะฒัะน ัะบัะธะฟั:
```bash
npx tsx test-two-cities-prompts.ts
```

## ะกัะพะธะผะพััั

ะัะธะผะตัะฝะฐั ััะพะธะผะพััั ะดะปั 10 ะผะฐัััััะพะฒ:
- OpenAI API (GPT-4): ~$0.50-1.00
- Google Places API: ะฑะตัะฟะปะฐัะฝะพ (ะฒ ะปะธะผะธัะฐั)
- Unsplash API: ะฑะตัะฟะปะฐัะฝะพ

**ะัะพะณะพ: ~$1 USD**

## ะะฐะถะฝะพ

โ๏ธ **ะญัะพ ัะตะฐะปัะฝะฐั ะณะตะฝะตัะฐัะธั!** ะะฐัััััั ะฑัะดัั ัะพััะฐะฝะตะฝั ะฒ ะฑะฐะทั ะดะฐะฝะฝัั.

โ ะะพัะปะต ััะฟะตัะฝะพะน ะณะตะฝะตัะฐัะธะธ ััะธ ะผะฐัััััั ะผะพะถะฝะพ ะฑัะดะตั ัะฒะธะดะตัั ะฒ ะฟัะธะปะพะถะตะฝะธะธ.

๐ฏ ะะฐะถะดัะน ะผะฐััััั ะฑัะดะตั ะธัะฟะพะปัะทะพะฒะฐัั **ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะน ะฟัะพะผะฟั** ะดะปั ัะฒะพะตะน ะฐะบัะธะฒะฝะพััะธ!
